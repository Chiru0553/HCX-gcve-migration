resource "nsxt_policy_segment" "uplink_router_segment" {
  display_name    	= "${var.uplink_router_segment}"
  description     	= "management segment for all the NGFW VMs"
  connectivity_path   = data.nsxt_policy_tier0_gateway.tier0_gw_gateway.path
  transport_zone_path = data.nsxt_policy_transport_zone.overlay_tz.path

  subnet {
	cidr    	= "${var.uplink_router_segment_cidr}" 
	}
  discovery_profile {
    mac_discovery_profile_path = resource.nsxt_policy_mac_discovery_profile.macdiscovery_profile.path
  }
  advanced_config {
	connectivity    = "ON"
	}
}

resource "nsxt_policy_segment" "management_router_segment" {
  display_name    	= "${var.management_router_segment}"
  description     	= "Management segment for all the NGFW VMs"
  connectivity_path   = data.nsxt_policy_tier0_gateway.tier0_gw_gateway.path
  transport_zone_path = data.nsxt_policy_transport_zone.overlay_tz.path

  subnet {
	cidr    	= "${var.management_router_segment_cidr}"
	}
}




